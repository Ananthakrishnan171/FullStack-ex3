<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KCET Learning - Modern Quiz Experience</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary-color: #4f46e5;
            --primary-hover: #4338ca;
            --secondary-color: #ec4899;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --success-color: #10b981;
            --error-color: #ef4444;
            --border-radius: 16px;
            --transition-speed: 0.3s;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
            padding: 20px;
        }

        /* --- LAYOUT --- */
        .app-wrapper {
            width: 100%;
            max-width: 900px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            min-height: 600px;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timer-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- QUIZ CONTENT AREA --- */
        .quiz-body {
            display: flex;
            flex: 1;
            flex-direction: column;
            padding: 30px;
        }

        @media (min-width: 768px) {
            .quiz-body {
                flex-direction: row;
            }
        }

        /* --- LEFT COLUMN (QUESTION) --- */
        .question-area {
            flex: 2;
            padding-right: 20px;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 20px;
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 600;
        }

        .progress-bar-bg {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Question Text */
        .question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-main);
        }

        /* Options */
        .options-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            position: relative;
        }

        .option-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-speed);
            font-size: 1rem;
        }

        .option-label:hover {
            border-color: var(--primary-color);
            background: #eef2ff;
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #d1d5db;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .option-marker::after {
            content: '';
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            transform: scale(0);
            transition: transform 0.2s;
        }

        /* Checked State */
        .option-item input[type="radio"]:checked + .option-label {
            border-color: var(--primary-color);
            background: #eef2ff;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.1);
        }

        .option-item input[type="radio"]:checked + .option-label .option-marker {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .option-item input[type="radio"]:checked + .option-label .option-marker::after {
            transform: scale(1);
        }

        /* --- RIGHT COLUMN (PALETTE) --- */
        .sidebar {
            flex: 1;
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: fit-content;
        }

        .sidebar h3 {
            font-size: 1rem;
            margin-bottom: 15px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .grid-dot {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: white;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.2s;
        }

        .grid-dot:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .grid-dot.active {
            border-color: var(--primary-color);
            background: #eef2ff;
            color: var(--primary-color);
            box-shadow: 0 0 0 2px var(--primary-color) inset;
        }

        .grid-dot.answered {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* --- FOOTER CONTROLS --- */
        .controls {
            padding: 20px 30px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: var(--text-main);
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* --- RESULT SCREEN --- */
        .result-view {
            display: none; /* Hidden by default */
            text-align: center;
            padding: 40px 20px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--success-color) 0%, #e5e7eb 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            position: relative;
        }

        .score-inner {
            width: 130px;
            height: 130px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-main);
        }

        .score-total {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .result-message {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-main);
        }

        .result-stats {
            display: flex;
            gap: 40px;
            margin-bottom: 40px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-val {
            font-size: 1.5rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .stat-val.correct { color: var(--success-color); }
        .stat-val.wrong { color: var(--error-color); }

        .review-list {
            width: 100%;
            text-align: left;
            margin-bottom: 30px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
        }

        .review-item {
            padding: 15px;
            border-bottom: 1px solid #e5e7eb;
            background: white;
        }
        .review-item:last-child { border-bottom: none; }
       
        .review-q { font-weight: 600; margin-bottom: 5px; font-size: 0.95rem; }
        .review-status { font-size: 0.85rem; font-weight: 600; display: inline-block; padding: 2px 8px; border-radius: 4px; margin-bottom: 5px; }
        .status-correct { background: #d1fae5; color: #065f46; }
        .status-wrong { background: #fee2e2; color: #991b1b; }
        .review-ans { font-size: 0.85rem; color: var(--text-muted); }

        /* --- TOAST NOTIFICATION --- */
        .toast {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: #1f2937;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
            pointer-events: none;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* Canvas for confetti */
        #confetti-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade {
            animation: fadeIn 0.4s ease forwards;
        }

    </style>
</head>
<body>

<div class="app-wrapper">
    <header>
        <h1>
            <!-- Simple SVG Logo -->
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
            KCET Learning
        </h1>
        <div class="timer-badge" id="timer-display">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span>10:00</span>
        </div>
    </header>

    <!-- QUIZ INTERFACE -->
    <div id="quiz-interface" class="quiz-body">
        <div class="question-area">
            <!-- Progress -->
            <div class="progress-container">
                <div class="progress-labels">
                    <span id="progress-text">Question 1 of 10</span>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progress-fill"></div>
                </div>
            </div>

            <!-- Question -->
            <h2 class="question-text" id="question-text">Loading...</h2>

            <!-- Options -->
            <ul class="options-list" id="options-container">
                <!-- Options injected via JS -->
            </ul>
        </div>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <h3>Question Map</h3>
            <div class="question-grid" id="question-grid">
                <!-- Grid dots injected via JS -->
            </div>
        </aside>
    </div>

    <!-- RESULT INTERFACE -->
    <div id="result-interface" class="result-view">
        <canvas id="confetti-canvas"></canvas>
        <div class="score-circle" id="score-circle">
            <div class="score-inner">
                <span class="score-number" id="final-score">0</span>
                <span class="score-total">/ 20</span>
            </div>
        </div>
        <h2 class="result-message" id="result-message">Great Job!</h2>
       
        <div class="result-stats">
            <div class="stat-item">
                <span class="stat-val correct" id="stat-correct">0</span>
                <span class="stat-label">Correct</span>
            </div>
            <div class="stat-item">
                <span class="stat-val wrong" id="stat-wrong">0</span>
                <span class="stat-label">Incorrect</span>
            </div>
        </div>

        <div class="review-list" id="review-list">
            <!-- Review items injected here -->
        </div>

        <button class="btn btn-primary" id="restart-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
            Restart Quiz
        </button>
    </div>

    <!-- CONTROLS FOOTER -->
    <div class="controls" id="controls-bar">
        <button class="btn btn-secondary" id="prev-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            Previous
        </button>
        <button class="btn btn-primary" id="next-btn">
            Next
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </button>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div class="toast" id="toast">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
        <span id="toast-message">Please select an option!</span>
    </div>
</div>

<script>
    // --- DATA ---
    const marksPerQuestion = 2;
    const questions = [
        {
            question: "What does HTML stand for?",
            options: [
                "Hyper Text Markup Language",
                "High Text Machine Language",
                "Hyperlinks Text Mark Language",
                "Home Tool Markup Language"
            ],
            answer: 0
        },
        {
            question: "Which HTML tag is used to define an internal style sheet?",
            options: [
                "<style>",
                "<css>",
                "<script>",
                "<link>"
            ],
            answer: 0
        },
        {
            question: "Which CSS property is used to change text color?",
            options: [
                "font-color",
                "color",
                "text-color",
                "bgcolor"
            ],
            answer: 1
        },
        {
            question: "Which symbol is used for jQuery?",
            options: ["#", "$", "@", "&"],
            answer: 1
        },
        {
            question: "Which JavaScript keyword is used to declare a variable?",
            options: ["var", "int", "string", "float"],
            answer: 0
        },
        {
            question: "Which HTML tag is used to create a hyperlink?",
            options: [
                "<link>",
                "<a>",
                "<href>",
                "<hyper>"
            ],
            answer: 1
        },
        {
            question: "Which jQuery method is used to hide an element?",
            options: ["hide()", "remove()", "delete()", "fadeOff()"],
            answer: 0
        },
        {
            question: "Which CSS property controls text size?",
            options: ["font-style", "text-size", "font-size", "text-style"],
            answer: 2
        },
        {
            question: "Which event occurs when a user clicks an element?",
            options: ["onmouseclick", "onclick", "onmouseover", "onchange"],
            answer: 1
        },
        {
            question: "Which language is used to add interactivity to web pages?",
            options: ["HTML", "CSS", "JavaScript", "XML"],
            answer: 2
        }
    ];

    // --- STATE ---
    let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null); // Stores index of selected option
    let timerSeconds = 600; // 10 minutes
    let timerInterval;

    // --- DOM ELEMENTS ---
    const els = {
        questionText: document.getElementById('question-text'),
        optionsContainer: document.getElementById('options-container'),
        prevBtn: document.getElementById('prev-btn'),
        nextBtn: document.getElementById('next-btn'),
        progressFill: document.getElementById('progress-fill'),
        progressText: document.getElementById('progress-text'),
        progressPercent: document.getElementById('progress-percent'),
        questionGrid: document.getElementById('question-grid'),
        quizInterface: document.getElementById('quiz-interface'),
        resultInterface: document.getElementById('result-interface'),
        controlsBar: document.getElementById('controls-bar'),
        timerDisplay: document.getElementById('timer-display'),
        toast: document.getElementById('toast'),
        toastMsg: document.getElementById('toast-message'),
        restartBtn: document.getElementById('restart-btn'),
        // Results
        finalScore: document.getElementById('final-score'),
        statCorrect: document.getElementById('stat-correct'),
        statWrong: document.getElementById('stat-wrong'),
        resultMessage: document.getElementById('result-message'),
        scoreCircle: document.getElementById('score-circle'),
        reviewList: document.getElementById('review-list'),
        confettiCanvas: document.getElementById('confetti-canvas')
    };

    // --- INITIALIZATION ---
    function init() {
        renderGrid();
        loadQuestion(0);
        startTimer();
       
        // Event Listeners
        els.nextBtn.addEventListener('click', handleNext);
        els.prevBtn.addEventListener('click', handlePrev);
        els.restartBtn.addEventListener('click', restartQuiz);
    }

    // --- CORE FUNCTIONS ---

    function loadQuestion(index) {
        currentQuestionIndex = index;
        const q = questions[index];

        // Animate Text Change
        els.questionText.classList.remove('animate-fade');
        void els.questionText.offsetWidth; // Trigger reflow
        els.questionText.textContent = `${index + 1}. ${q.question}`;
        els.questionText.classList.add('animate-fade');

        // Render Options
        els.optionsContainer.innerHTML = '';
        q.options.forEach((opt, i) => {
            const li = document.createElement('li');
            li.className = 'option-item';
           
            const input = document.createElement('input');
            input.type = 'radio';
            input.name = 'option';
            input.id = `opt-${i}`;
            input.value = i;
            input.checked = userAnswers[index] === i;
           
            // Auto-save on selection
            input.addEventListener('change', () => {
                selectOption(i);
            });

            const label = document.createElement('label');
            label.className = 'option-label';
            label.htmlFor = `opt-${i}`;
           
            const marker = document.createElement('span');
            marker.className = 'option-marker';
           
            const text = document.createTextNode(opt);

            label.appendChild(marker);
            label.appendChild(text);
            li.appendChild(input);
            li.appendChild(label);
            els.optionsContainer.appendChild(li);
        });

        updateProgress();
        updateGridActiveState();
        updateButtons();
    }

    function selectOption(optionIndex) {
        userAnswers[currentQuestionIndex] = optionIndex;
        updateGridActiveState();
    }

    function updateProgress() {
        const answeredCount = userAnswers.filter(a => a !== null).length;
        const percent = Math.round((answeredCount / questions.length) * 100);
       
        els.progressText.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
        els.progressPercent.textContent = `${percent}% Completed`;
        els.progressFill.style.width = `${percent}%`;
    }

    function updateButtons() {
        els.prevBtn.disabled = currentQuestionIndex === 0;
       
        if (currentQuestionIndex === questions.length - 1) {
            els.nextBtn.innerHTML = `Submit <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></svg>`;
            els.nextBtn.classList.remove('btn-primary');
            els.nextBtn.style.background = 'var(--success-color)';
            els.nextBtn.style.color = 'white';
        } else {
            els.nextBtn.innerHTML = `Next <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`;
            els.nextBtn.classList.add('btn-primary');
            els.nextBtn.style.background = ''; // Reset inline style
        }
    }

    // --- QUESTION PALETTE ---
    function renderGrid() {
        els.questionGrid.innerHTML = '';
        questions.forEach((_, i) => {
            const dot = document.createElement('div');
            dot.className = 'grid-dot';
            dot.textContent = i + 1;
            dot.onclick = () => loadQuestion(i);
            els.questionGrid.appendChild(dot);
        });
    }

    function updateGridActiveState() {
        const dots = els.questionGrid.children;
        for (let i = 0; i < dots.length; i++) {
            dots[i].className = 'grid-dot'; // Reset
            if (i === currentQuestionIndex) dots[i].classList.add('active');
            if (userAnswers[i] !== null) dots[i].classList.add('answered');
        }
    }

    // --- NAVIGATION LOGIC ---
    function handleNext() {
        // Validation: If on last page, submitting. Else moving next.
        if (currentQuestionIndex === questions.length - 1) {
            finishQuiz();
            return;
        }

        if (userAnswers[currentQuestionIndex] === null) {
            showToast("Please select an answer to proceed!");
        } else {
            loadQuestion(currentQuestionIndex + 1);
        }
    }

    function handlePrev() {
        if (currentQuestionIndex > 0) {
            loadQuestion(currentQuestionIndex - 1);
        }
    }

    function showToast(msg) {
        els.toastMsg.textContent = msg;
        els.toast.classList.add('show');
        setTimeout(() => {
            els.toast.classList.remove('show');
        }, 3000);
    }

    // --- TIMER ---
    function startTimer() {
        timerInterval = setInterval(() => {
            timerSeconds--;
            const m = Math.floor(timerSeconds / 60);
            const s = timerSeconds % 60;
            els.timerDisplay.querySelector('span').textContent = `${m}:${s < 10 ? '0' : ''}${s}`;

            if (timerSeconds <= 0) {
                clearInterval(timerInterval);
                finishQuiz(true); // Force finish
            }
        }, 1000);
    }

    // --- RESULTS & SCORING ---
    function finishQuiz(force = false) {
        clearInterval(timerInterval);
       
        // Calculate Score
        let correctCount = 0;
        let reviewHtml = '';

        questions.forEach((q, i) => {
            const userAns = userAnswers[i];
            const isCorrect = userAns === q.answer;
            if (isCorrect) correctCount++;

            // Generate Review Item
            const statusClass = isCorrect ? 'status-correct' : 'status-wrong';
            const statusText = isCorrect ? 'Correct' : 'Incorrect';
            const userAnsText = userAns !== null ? q.options[userAns] : 'Not Answered';
            const correctAnsText = q.options[q.answer];

            reviewHtml += `
                <div class="review-item">
                    <div class="review-q">Q${i+1}: ${q.question}</div>
                    <span class="review-status ${statusClass}">${statusText}</span>
                    <div class="review-ans">You: ${userAnsText}</div>
                    ${!isCorrect ? `<div class="review-ans" style="color:var(--success-color)">Correct: ${correctAnsText}</div>` : ''}
                </div>
            `;
        });

        const totalScore = correctCount * marksPerQuestion;
        const percentScore = (correctCount / questions.length) * 100;

        // Update UI
        els.finalScore.textContent = totalScore;
        els.statCorrect.textContent = correctCount;
        els.statWrong.textContent = questions.length - correctCount;
        els.reviewList.innerHTML = reviewHtml;

        // Dynamic Message
        if (percentScore >= 80) els.resultMessage.textContent = "Excellent Work! ðŸŒŸ";
        else if (percentScore >= 50) els.resultMessage.textContent = "Good Job! ðŸ‘";
        else els.resultMessage.textContent = "Keep Practicing! ðŸ“š";

        // Update Circle Chart (Conic Gradient)
        els.scoreCircle.style.background = `conic-gradient(var(--success-color) ${percentScore}%, #e5e7eb ${percentScore}%)`;

        // Transition Views
        els.quizInterface.style.display = 'none';
        els.controlsBar.style.display = 'none';
        els.resultInterface.style.display = 'flex';
       
        // Trigger Confetti if score is decent
        if (percentScore > 50) {
            startConfetti();
        }
    }

    function restartQuiz() {
        currentQuestionIndex = 0;
        userAnswers = new Array(questions.length).fill(null);
        timerSeconds = 600;
       
        els.resultInterface.style.display = 'none';
        els.quizInterface.style.display = 'flex';
        els.controlsBar.style.display = 'flex';
       
        // Reset Timer Display
        els.timerDisplay.querySelector('span').textContent = "10:00";
       
        // Clear Canvas
        const ctx = els.confettiCanvas.getContext('2d');
        ctx.clearRect(0,0, els.confettiCanvas.width, els.confettiCanvas.height);

        startTimer();
        loadQuestion(0);
    }

    // --- CONFETTI EFFECT (Simple Canvas Implementation) ---
    function startConfetti() {
        const canvas = els.confettiCanvas;
        const ctx = canvas.getContext('2d');
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;

        const pieces = [];
        const numberOfPieces = 100;
        const colors = ['#4f46e5', '#ec4899', '#10b981', '#f59e0b'];

        for (let i = 0; i < numberOfPieces; i++) {
            pieces.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                rotation: Math.random() * 360,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 10 + 5,
                speed: Math.random() * 5 + 2
            });
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
           
            pieces.forEach(p => {
                p.y += p.speed;
                p.rotation += 2;
                if (p.y < canvas.height) active = true;

                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                ctx.restore();
            });

            if (active) requestAnimationFrame(animate);
        }
        animate();
    }

    // Start App
    init();

</script>
</body>
</html>